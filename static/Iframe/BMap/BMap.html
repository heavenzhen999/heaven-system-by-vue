<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" href="../../assets/css/basic.css">
  <script type="text/javascript" src="http://api.map.baidu.com/api?v=1.3"></script>
  <style>
    #map-contain{
      height: 100%;
      width: 100%;
    }
    .anchorBL{
      display: none;
    }
  </style>
</head>
<body>
  <div id="map-contain"></div>
  <script>
    var templateList = []                      // 用于存储查询结果
    var addressList = []
    var i = 0
    var mapLoaded = false
    var searchLoaded = false
    var map = new BMap.Map('map-contain')
    map.centerAndZoom('北京', 12)
    map.addControl(new BMap.NavigationControl())
    map.addControl(new BMap.OverviewMapControl())

    var localSearch = new BMap.LocalSearch(map)
    localSearch.enableAutoViewport()
    localSearch.setSearchCompleteCallback(searchResult)
    map.addEventListener('load', function() {
      mapLoaded = true
    })
    /**
     * @description 需要进行查询位置信息的方法
     */
    function searchAddress(_addressList) {
      templateList = []
      addressList = _addressList
      localSearch.search(addressList[i])
      i++
    }
    /**
     * @description 查询后的回调函数
     */
    function searchResult(result) {
      if (i < addressList.length) {
        localSearch.search(addressList[i])
        i++
      } else {
        addressList = []
        i = 0
        searchLoaded = true
      }
      templateList.push({
        keyword: result.keyword,
        city: result.city,
        province: result.province,
        pois: result._pois
      })
    }
  </script>
</body>
</html>